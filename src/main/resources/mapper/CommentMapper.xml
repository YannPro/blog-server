<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yannyao.blog.mapper.CommentMapper">
    <resultMap id="CommentMap" type="com.yannyao.blog.bean.ArticleComment">
        <id column="id" property="id"/>
        <result column="content" property="content"/>
        <result column="status" property="status"/>
        <result column="article_id" property="articleId"/>
        <result column="user_id" property="userId"/>
        <result column="parent_comment_id" property="parentCommentId"/>
        <result column="reply_user_id" property="replyUserId"/>
        <result column="create_time" property="createTime"/>
    </resultMap>

    <select id="getAll"  resultMap="CommentMap">
        SELECT * FROM `article_comment` a
    </select>
    <select id="getList"  resultMap="CommentMap">
        SELECT * FROM `article_comment` a
    </select>
    <select id="getById"  resultMap="CommentMap">
        SELECT * FROM `article_comment` u WHERE `id` = #{_parameter}
    </select>
    <select id="getListByArticleId"  resultMap="CommentMap">
        SELECT * FROM `article_comment` a WHERE `article_id` = #{articleId}
        LIMIT #{tableMessage.offset},#{tableMessage.limit}
    </select>
    <insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="com.yannyao.blog.bean.ArticleComment">
        INSERT INTO `article_comment` (`content`,`article_id`,`user_id`,`parent_comment_id`,`reply_user_id`)
        VALUES (#{content},#{article_id},#{user_id},#{parent_comment_id},#{reply_user_id})
    </insert>
</mapper>